// Generated by CoffeeScript 1.3.3
var Post;

Post = (function() {

  Post.postTemplateSelector;

  function Post(json) {
    var self;
    self = this;
    self.postTemplateSelector = '#post-tpl';
    self = $.extend(self, JSON.parse(json));
  }

  Post.prototype.render_tpl = function() {
    var post_text, time_elapsed, tpl, user;
    tpl = $(this.postTemplateSelector).clone().removeClass('tpl').attr('id', '');
    user = $('.user:first', tpl);
    user.attr('href', user.attr('href') + this.user.username);
    user.html(this.user.name);
    $('.avatar:first', tpl).attr('src', this.user.avatar_image.url);
    post_text = $(this.html);
    $('a', post_text).attr('target', '_blank');
    $('.text:first', tpl).html(post_text);
    time_elapsed = $('.time-elapsed:first', tpl);
    time_elapsed.html(moment(this.created_at).fromNow());
    time_elapsed.attr('data-created-at', this.created_at);
    return tpl;
  };

  return Post;

})();
